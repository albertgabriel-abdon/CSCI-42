{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Plans | Prep & Plate</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Brush+Script+MT&family=Georgia:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Font Styles */
        body { 
            font-family: 'Poppins', sans-serif; 
        }
        h1, h2, h3 { 
            font-family: 'Georgia', serif; 
            font-weight: bold; 
        }
        .brush { 
            font-family: 'Brush Script MT', cursive; 
            font-size: 1.5rem; 
        }
        
        .navbar {
     background: #d14938;
     color: #FFF;
     padding: 20px 60px;
     display: flex;
     justify-content: space-between;
     align-items: center;
   }
  
   /* Left: Logo */
   .navbar-left img {
     height: 50px;
   }
  
   .navbar-left img:hover {
     opacity: 0.8;
   }
  
   /* Center: Navigation Links */
   .navbar-center a {
     color: #FFF;
     font-size: 18px;
     text-decoration: none;
     margin: 0 20px;
     transition: color 0.3s;
   }
  
   .navbar-center a:hover,
   .navbar-center a.active {
     color: #F3B20C;
   }
  
   /* Right: Icons */
   .navbar-right img {
     height: 28px;
     margin-left: 20px;
     cursor: pointer;
     transition: opacity 0.3s;
   }
  
   .navbar-right img:hover {
     opacity: 0.8;
   }

        /* Notifications */

     .notification-wrapper {
  position: relative;
  display: inline-block;
}

#notification-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
}

#notification-btn img {
  width: 28px;
  height: 28px;
}

#notification-panel {
  position: absolute;
  right: 0;
  top: 40px;
  width: 300px;
  background-color: #fff;
  border: 2px solid #003087;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 100;
  display: none;
}

#notification-panel.show {
  display: block;
}

.notification-item {
  padding: 15px;
  border-bottom: 1px solid #eee;
  font-size: 16px;
  color: #003087;
}

.notification-item:last-child {
  border-bottom: none;
}

        /* Header */
        .header { 
            background-color: #097d4c; 
            padding: 15px 0; 
        }
        .header a { 
            color: white; 
            text-decoration: none; 
            transition: color 0.3s; 
        }
        .header a:hover { 
            color: #efbd40; 
        }

        /* Top Section */
        .meal-intro {
            background-color: #f1ead1;
            text-align: center;
            padding: 50px 20px;
        }
        .meal-intro h1 { 
            color: #097d4c; 
            font-size: 3.5rem; 
        }
        .meal-intro .brush { 
            color: #eb8917; 
            font-size: 50px;
        }
        .btn-create {
            background-color: #097d4c;
            color: white;
            padding: 10px 20px;
            width: 300px;
            font-weight: bold;
            transition: background-color 0.3s;
            border-radius: 100px;
        }
        .btn-create:hover {
            background-color: #efbd40;
            color: #097d4c;
        }

        /* Meal Plan Section */
        .meal-section {
            background-color: #097d4c;
            padding: 40px 20px;
            text-align: center;
            color: white;
        }
        .meal-card {
            background-color: #d14938;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            position: relative;
            margin-bottom: 20px;
        }
        .meal-card img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 15px;
        }
        .meal-card h3 { 
            font-family: 'Brush Script MT', cursive; 
            font-size: 1.8rem; 
        }
        .edit-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
        .btn-see-more {
            background-color: #d14938;
            color:#efbd40;
            width: 200px;
            border: none;
            padding: 10px 20px;
            transition: background-color 0.3s;
            border-radius: 200px;
            font-weight: bold;
        }
        .btn-see-more:hover {
            background-color: #efbd40;
            color: #d14938;
        }

        .footer {
            background-color: #f1ead1;
            padding: 30px;
            color: #097d4c;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1900px;
            margin-left: 40px;
            margin-right: 40px;
            flex-wrap: wrap;
        }
        .footer-left {
            flex: 1;
            text-align: left;
        }
        .footer-left img {
            width: 100px;
        }
        .footer-right {
            flex: 4;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .footer-top {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .footer-top div {
            flex: 1;
            text-align: center;
        }
        .footer-bottom {
            margin-top: 10px;
            border-top: 2px solid #eb8917;
            padding-top: 10px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .footer-bottom a {
            color: #097d4c;
            text-decoration: none;
            font-size: 0.9rem;
            flex: 2;
        }
        .footer-bottom a:hover {
            text-decoration: underline;
            color: #eb8917;
        }
        .checkered-divider {
        height: 20px;
        background: repeating-linear-gradient(
            45deg,
            #097d4c 0,
            #097d4c 10px,
            #f1ead1 10px,
            #f1ead1 20px
            );
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="navbar-left">
      <a href="{% url 'home' %}">
        <img src="{% static 'static_media/prep&plate_logo_white.png' %}" alt="Prep & Plate Logo" class="logo">
      </a>
    </div>
   
   
    <div class="navbar-center">
      <a href="{% url 'home' %}" class="active">My Kitchen</a>
      <a href="{% url 'recipes_list' %}">My Recipes</a>
      <a href="{% url 'browse_recipes' %}">Browse Recipes</a>
      <a href="{% url 'shopping_list' %}">Shopping List</a>
      <a href="{% url 'community' %}">Community</a>
      <a href="{% url 'meal_plan' %}" class="active">Meal Plan</a>
    </div>
   
   
    <div class="navbar-right">
      <div class="notification-wrapper">
        <button id="notification-btn">
          <img src="{% static 'static_media/bell.png' %}" alt="Notifications" />
        </button>
        <div id="notification-panel" class="hidden">
          {% for notification in notifications %}
            <div class="notification-item">
              {{ notification.message }}
            </div>
          {% empty %}
            <div class="notification-item">You're all caught up!</div>
          {% endfor %}
        </div>
      </div>
      
      <a href="#"><img src="{% static 'static_media/user.png' %}" alt="User Profile"></a>
    </div>
   </nav>

<!-- Meal Plan Intro Section -->
<div class="meal-intro">
    <h1>Whacha eatin’?</h1>
    <p class="brush">Share your meal plan and recipes!</p>
    <p style="margin-left: 10%; margin-right: 10%;">Why keep your delicious plans to yourself? With Prep & Plate’s Meal Plan Sharing, you can share your weekly menus and favorite recipes with family, friends, or fellow foodies. Swap ideas, discover new dishes, and stay inspired together. Meal prep just got a whole lot more fun—because good food is even better when shared!</p>
    <br>

    <form action="{% url 'blog:mealplans_create' %}" method="get">
        <button class="btn btn-create" type="submit">CREATE MEAL PLAN</button>
    </form>
    
</div>

<!-- Meal Plans Section -->
<div class="meal-section">
    <h2>Meal Plans</h2>

    {% if mealplans %}
        <div class="container">
            <div class="row">
                {% for mealplan in mealplans %}
                    <div class="col-md-6">
                        <div class="meal-card p-3 d-flex">
                            <img src="{% static 'meal1.jpg' %}" alt="Meal Image"> 
                            <div>
                                <h3>{{ mealplan.name }}</h3>
                                <p><strong>Created by: {{ mealplan.user.username }}</strong></p>
                                <p>Status: {{ mealplan.get_status_display }} - {{ mealplan.start_date }}</p>
                            </div>
                            <a href="{% url 'blog:mealplan_detail' mealplan.pk %}" class="edit-icon">✏️</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% else %}
        <p>No meal plans found. Create your first meal plan now!</p>
    {% endif %}

    <a href="{% url 'blog:mealplan_list' %}" class="btn btn-see-more mt-3">See More</a>
</div>

<!-- Checkered Divider -->
<div class="checkered-divider"></div>

<!-- Footer -->
<div class="footer">
    <div class="footer-content">
        <div class="footer-left">
            <img src="{% static 'img/logo.png' %}" alt="Prep & Plate Logo">
        </div>
        <div class="footer-right">
            <div class="footer-top">
                <div>
                    <p>Prep Smart. Plate Perfect.<span style="color:#eb8917; font-weight:bold;"> Savor More.</span></p>
                </div>
                <div>
                    <p>123 Anywhere St., Any City, ST 12345</p>
                </div>
                <div>
                    <p>Contact Us at 123-456-7890</p>
                </div>
            </div>
            <div class="footer-bottom">
                <a href="#">Help</a>
                <a href="#">Community Guidelines</a>
                <a href="#">Copyright Policy</a>
                <a href="#">Privacy Policy</a>
                <a href="#">User Agreement</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const notifBtn = document.getElementById('notification-btn');
    const notifPanel = document.getElementById('notification-panel');
  
    notifBtn.addEventListener('click', () => {
      notifPanel.classList.toggle('show');
    });
  
    document.addEventListener('click', (e) => {
      if (!notifBtn.contains(e.target) && !notifPanel.contains(e.target)) {
        notifPanel.classList.remove('show');
      }
    });
  </script>
</body>
</html>
