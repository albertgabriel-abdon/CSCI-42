<h1>{{ recipe.name }}</h1>
<p><strong>Category:</strong> {{ recipe.get_category_display }}</p>
<p><strong>Difficulty:</strong> {{ recipe.get_difficulty_display }}</p>
<p><strong>Preparation Time:</strong> {{ recipe.preparation_time }} mins</p>
<p><strong>Cook Time:</strong> {{ recipe.cook_time }} mins</p>
<p><strong>Servings:</strong> {{ recipe.servings }}</p>

<hr>

{% if meal_plan_recipes %}
    <h2>Currently Saved in Meal Plan(s):</h2>
    <ul>
        {% for meal_plan_recipe in meal_plan_recipes %}
            <li>
                {{ meal_plan_recipe.meal_plan.name }} - Scheduled for {{ meal_plan_recipe.scheduled_date }}
            </li>
        {% endfor %}
    </ul>

    <h2>Add to Another Meal Plan:</h2>
{% else %}
    <h2>Not in any Meal Plan yet!</h2>
    <p>Would you like to add it to a meal plan?</p>
{% endif %}

<form method="POST" action="{% url 'blog:recipe_add' recipe.pk %}">
    {% csrf_token %}
    <input type="hidden" name="recipe_id" value="{{ recipe.pk }}">
    
    <label for="meal_plan">Select Meal Plan:</label>
    <select id="meal_plan" name="meal_plan" required>
        {% for meal_plan in meal_plans %}
            <option value="{{ meal_plan.id }}">{{ meal_plan.name }}</option>
        {% endfor %}
    </select>

    <label for="scheduled_date">Scheduled Date:</label>
    <input type="date" id="scheduled_date" name="scheduled_date" value="{{ default_scheduled_date|date:'Y-m-d' }}" required>

    <button type="submit">Add</button>
</form> 